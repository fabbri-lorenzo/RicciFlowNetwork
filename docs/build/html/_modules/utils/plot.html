<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>utils.plot &#8212; Ricci Flow in Networks 01/03/2025 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="../../_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=27fed22d" />
    <script src="../../_static/documentation_options.js?v=fbff3254"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for utils.plot</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">A module for plotting graphs and charts.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.colors</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">mcolors</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.cm</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">mcm</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">networkx</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">nx</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn</span><span class="w"> </span><span class="kn">import</span> <span class="n">preprocessing</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Global variables for plotting</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">default_nodes_cmap</span> <span class="o">=</span> <span class="s2">&quot;tab20&quot;</span>

<span class="n">edge_colors</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;blue&quot;</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="s2">&quot;black&quot;</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;red&quot;</span><span class="p">)]</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Custom colormap for edges based on Ricci curvature values. The colors represent different curvature ranges:</span>
<span class="sd">- Blue: Negative curvature</span>
<span class="sd">- Black: Zero curvature</span>
<span class="sd">- Red: Positive curvature</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">curvature_cmap</span> <span class="o">=</span> <span class="n">mcolors</span><span class="o">.</span><span class="n">LinearSegmentedColormap</span><span class="o">.</span><span class="n">from_list</span><span class="p">(</span><span class="s2">&quot;CustomMap&quot;</span><span class="p">,</span> <span class="n">edge_colors</span><span class="p">)</span>

<div class="viewcode-block" id="GraphDrawer">
<a class="viewcode-back" href="../../utils.html#utils.plot.GraphDrawer">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">GraphDrawer</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class for visualizing network graphs with Ricci curvature and community structures.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">graph</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">save_path</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the GraphDrawer with a graph, title, save path, and an optional seed for layout positioning.</span>

<span class="sd">        :param graph: The graph to be visualized.</span>
<span class="sd">        :type graph: networkx.Graph</span>
<span class="sd">        :param title: The title for the plot.</span>
<span class="sd">        :type title: str</span>
<span class="sd">        :param save_path: Directory where the plot will be saved.</span>
<span class="sd">        :type save_path: str</span>
<span class="sd">        :param seed: Seed for the layout positioning. Default is 42.</span>
<span class="sd">        :type seed: int, optional</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span> <span class="o">=</span> <span class="n">graph</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">title</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_path</span> <span class="o">=</span> <span class="n">save_path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">spring_layout</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">seed</span><span class="o">=</span><span class="n">seed</span><span class="p">)</span>

<div class="viewcode-block" id="GraphDrawer.draw_colorbar">
<a class="viewcode-back" href="../../utils.html#utils.plot.GraphDrawer.draw_colorbar">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">draw_colorbar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">curvature_values</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draws a colorbar for the Ricci curvature values.</span>

<span class="sd">        :param curvature_values: List of curvature values for edges.</span>
<span class="sd">        :type curvature_values: list of float</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sm</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">ScalarMappable</span><span class="p">(</span>
            <span class="n">cmap</span><span class="o">=</span><span class="n">curvature_cmap</span><span class="p">,</span>
            <span class="n">norm</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="nb">min</span><span class="p">(</span><span class="n">curvature_values</span><span class="p">),</span> <span class="n">vmax</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="n">curvature_values</span><span class="p">)),</span>
        <span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">sm</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">(),</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Ricci Curvature&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="GraphDrawer.save_and_show">
<a class="viewcode-back" href="../../utils.html#utils.plot.GraphDrawer.save_and_show">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">save_and_show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plot_axis</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves the current plot to the specified directory and displays it.</span>

<span class="sd">        :param plot_axis: Whether to display the axis in the plot. Default is False.</span>
<span class="sd">        :type plot_axis: bool, optional</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">set_window_title</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">plot_axis</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&quot;off&quot;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">+</span> <span class="s2">&quot;.png&quot;</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">600</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></div>


<div class="viewcode-block" id="GraphDrawer.draw_graph">
<a class="viewcode-back" href="../../utils.html#utils.plot.GraphDrawer.draw_graph">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">draw_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clustering_label</span><span class="p">,</span> <span class="n">nodes_cmap</span><span class="o">=</span><span class="n">default_nodes_cmap</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draws the graph with community coloring (from ground truth) and Ricci curvature visualization.</span>

<span class="sd">        :param clustering_label: Node attribute name for clustering (community) labels.</span>
<span class="sd">        :type clustering_label: str</span>
<span class="sd">        :param nodes_cmap: The colormap for nodes. Default is `default_nodes_cmap`.</span>
<span class="sd">        :type nodes_cmap: str, optional</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">complex_list</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">get_node_attributes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">,</span> <span class="n">clustering_label</span><span class="p">)</span>
        <span class="n">le</span> <span class="o">=</span> <span class="n">preprocessing</span><span class="o">.</span><span class="n">LabelEncoder</span><span class="p">()</span>
        <span class="n">node_color</span> <span class="o">=</span> <span class="n">le</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">complex_list</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>

        <span class="n">colormap</span> <span class="o">=</span> <span class="n">mcm</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="n">nodes_cmap</span><span class="p">)</span>  <span class="c1"># Discrete colormap</span>
        <span class="c1"># Create node colors based on community assignment</span>
        <span class="n">mapped_node_color</span> <span class="o">=</span> <span class="p">[</span><span class="n">colormap</span><span class="p">(</span><span class="n">comm</span><span class="p">)</span> <span class="k">for</span> <span class="n">comm</span> <span class="ow">in</span> <span class="n">node_color</span><span class="p">]</span>

        <span class="n">curvature_values</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">d</span><span class="p">[</span><span class="s2">&quot;ricciCurvature&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="p">]</span>
        <span class="c1"># Add color bar for Ricci Curvature</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_colorbar</span><span class="p">(</span><span class="n">curvature_values</span><span class="p">)</span>
        <span class="c1"># Normalize curvature values between 0 and 1</span>
        <span class="n">norm</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span>
            <span class="n">vmin</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">curvature_values</span><span class="p">),</span> <span class="n">vmax</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">curvature_values</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="c1"># Apply colormap to normalized values</span>
        <span class="n">edge_colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">curvature_cmap</span><span class="p">(</span><span class="n">norm</span><span class="p">(</span><span class="n">value</span><span class="p">))</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">curvature_values</span><span class="p">]</span>

        <span class="n">nx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">,</span>
            <span class="n">pos</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">,</span>
            <span class="n">nodelist</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">nodes</span><span class="p">(),</span>
            <span class="n">node_color</span><span class="o">=</span><span class="n">mapped_node_color</span><span class="p">,</span>
            <span class="n">node_size</span><span class="o">=</span><span class="mi">130</span><span class="p">,</span>
            <span class="n">edge_color</span><span class="o">=</span><span class="n">edge_colors</span><span class="p">,</span>
            <span class="n">alpha</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_and_show</span><span class="p">()</span></div>


<div class="viewcode-block" id="GraphDrawer.draw_communities">
<a class="viewcode-back" href="../../utils.html#utils.plot.GraphDrawer.draw_communities">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">draw_communities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clustering_label</span><span class="p">,</span> <span class="n">nodes_cmap</span><span class="o">=</span><span class="n">default_nodes_cmap</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draws the communities (identified as the connected components) in subplots.</span>

<span class="sd">        :param clustering_label: Node attribute name for clustering (community) labels.</span>
<span class="sd">        :type clustering_label: str</span>
<span class="sd">        :param nodes_cmap: The colormap for nodes. Default is `default_nodes_cmap`.</span>
<span class="sd">        :type nodes_cmap: str, optional</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">complex_list</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">get_node_attributes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">,</span> <span class="n">clustering_label</span><span class="p">)</span>
        <span class="n">le</span> <span class="o">=</span> <span class="n">preprocessing</span><span class="o">.</span><span class="n">LabelEncoder</span><span class="p">()</span>
        <span class="n">graph_node_color</span> <span class="o">=</span> <span class="n">le</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">complex_list</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>
        <span class="n">graph_dict_colors</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">nodes</span><span class="p">(),</span> <span class="n">graph_node_color</span><span class="p">))</span>

        <span class="c1"># Convert the generator to a list to get the connected components</span>
        <span class="n">cc</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">connected_components</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">)</span>
        <span class="n">num_components</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">cc</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Detected </span><span class="si">{</span><span class="n">num_components</span><span class="si">}</span><span class="s2"> communities&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">num_components</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Detected communities are too many for visualization.&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="mi">0</span>

        <span class="c1"># Create a figure with subplots</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">num_components</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span> <span class="o">*</span> <span class="n">num_components</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">num_components</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">axes</span> <span class="o">=</span> <span class="p">[</span><span class="n">axes</span><span class="p">]</span>  <span class="c1"># Ensure axes is iterable if there&#39;s only one component</span>

        <span class="n">cc</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">connected_components</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">)</span>  <span class="c1"># Get the generator again</span>
        <span class="c1"># Plot each connected component in a subplot</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">component</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">cc</span><span class="p">):</span>
            <span class="n">ax</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
            <span class="n">subgraph</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">subgraph</span><span class="p">(</span><span class="n">component</span><span class="p">)</span>
            <span class="n">subgraph_dict_colors</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">k</span><span class="p">:</span> <span class="n">graph_dict_colors</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">subgraph</span><span class="o">.</span><span class="n">nodes</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">graph_dict_colors</span>
            <span class="p">}</span>

            <span class="n">colormap</span> <span class="o">=</span> <span class="n">mcm</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="n">nodes_cmap</span><span class="p">)</span>  <span class="c1"># Discrete colormap</span>
            <span class="c1"># Create node colors based on community assignment</span>
            <span class="n">node_colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">colormap</span><span class="p">(</span><span class="n">comm</span><span class="p">)</span> <span class="k">for</span> <span class="n">comm</span> <span class="ow">in</span> <span class="n">subgraph_dict_colors</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>

            <span class="n">curvature_values</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">d</span><span class="p">[</span><span class="s2">&quot;ricciCurvature&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="p">]</span>
            <span class="c1"># Normalize curvature values between 0 and 1</span>
            <span class="n">norm</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span>
                <span class="n">vmin</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">curvature_values</span><span class="p">),</span> <span class="n">vmax</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">curvature_values</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="c1"># Apply colormap to normalized values</span>
            <span class="n">edge_colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">curvature_cmap</span><span class="p">(</span><span class="n">norm</span><span class="p">(</span><span class="n">value</span><span class="p">))</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">curvature_values</span><span class="p">]</span>

            <span class="c1"># Draw the subgraph for the current component</span>
            <span class="n">nx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span>
                <span class="n">subgraph</span><span class="p">,</span>
                <span class="n">pos</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">,</span>
                <span class="n">nodelist</span><span class="o">=</span><span class="n">subgraph</span><span class="o">.</span><span class="n">nodes</span><span class="p">(),</span>
                <span class="n">node_color</span><span class="o">=</span><span class="n">node_colors</span><span class="p">,</span>
                <span class="n">node_size</span><span class="o">=</span><span class="mi">130</span><span class="p">,</span>
                <span class="n">edge_color</span><span class="o">=</span><span class="n">edge_colors</span><span class="p">,</span>
                <span class="n">alpha</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span>
                <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>  <span class="c1"># Specify the axis for the current subplot</span>
            <span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Community </span><span class="si">{</span><span class="n">idx</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&quot;off&quot;</span><span class="p">)</span>

        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_and_show</span><span class="p">()</span></div>


<div class="viewcode-block" id="GraphDrawer.plot_graph_histo">
<a class="viewcode-back" href="../../utils.html#utils.plot.GraphDrawer.plot_graph_histo">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">plot_graph_histo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">curvature</span><span class="o">=</span><span class="s2">&quot;ricciCurvature&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Plots histograms for Ricci curvature and edge weights.</span>

<span class="sd">        :param curvature: The edge attribute name for Ricci curvature values. Default is &quot;ricciCurvature&quot;.</span>
<span class="sd">        :type curvature: str, optional</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Plot the histogram of Ricci curvatures</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">ricci_curvtures</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">get_edge_attributes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">,</span> <span class="n">curvature</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">ricci_curvtures</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Ricci curvature&quot;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;# of nodes&quot;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Histogram of Ricci Curvatures &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>

        <span class="c1"># Plot the histogram of edge weights</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">weights</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">get_edge_attributes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">,</span> <span class="s2">&quot;weight&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">weights</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Edge weight&quot;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;# of nodes&quot;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Histogram of Edge weights &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>

        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_and_show</span><span class="p">(</span><span class="n">plot_axis</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="plot_accuracy">
<a class="viewcode-back" href="../../utils.html#utils.plot.plot_accuracy">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">plot_accuracy</span><span class="p">(</span><span class="n">maxw</span><span class="p">,</span> <span class="n">cutoff_range</span><span class="p">,</span> <span class="n">modularity</span><span class="p">,</span> <span class="n">ari</span><span class="p">,</span> <span class="n">save_path</span><span class="p">,</span> <span class="n">good_cut</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Plots the accuracy of the edge weight cutoff with respect to modularity and Adjusted Rand Index (ARI).</span>

<span class="sd">    :param maxw: Maximum edge weight for the x-axis limit.</span>
<span class="sd">    :type maxw: float</span>
<span class="sd">    :param cutoff_range: Range of edge weight cutoff values.</span>
<span class="sd">    :type cutoff_range: list or array of float</span>
<span class="sd">    :param modularity: Modularity values corresponding to the cutoff range.</span>
<span class="sd">    :type modularity: list or array of float</span>
<span class="sd">    :param ari: Adjusted Rand Index values corresponding to the cutoff range.</span>
<span class="sd">    :type ari: list or array of float</span>
<span class="sd">    :param save_path: Path to save the resulting plot image.</span>
<span class="sd">    :type save_path: str</span>
<span class="sd">    :param good_cut: Optional edge weight cutoff value that represents a &quot;good&quot; cut. If provided, a vertical line will be drawn at this value. Default is None.</span>
<span class="sd">    :type good_cut: float, optional</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="n">maxw</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Edge weight cutoff&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">cutoff_range</span><span class="p">,</span> <span class="n">modularity</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">cutoff_range</span><span class="p">,</span> <span class="n">ari</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">good_cut</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s2">&quot;Modularity&quot;</span><span class="p">,</span> <span class="s2">&quot;Adjust Rand Index&quot;</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">good_cut</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s2">&quot;Modularity&quot;</span><span class="p">,</span> <span class="s2">&quot;Adjust Rand Index&quot;</span><span class="p">,</span> <span class="s2">&quot;Good cut&quot;</span><span class="p">])</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">set_window_title</span><span class="p">(</span><span class="s2">&quot;Surgery Accuracy&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">save_path</span><span class="p">,</span> <span class="s2">&quot;Surgery Accuracy.png&quot;</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">600</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></div>



<div class="viewcode-block" id="plot_comp_histo">
<a class="viewcode-back" href="../../utils.html#utils.plot.plot_comp_histo">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">plot_comp_histo</span><span class="p">(</span><span class="n">modularity_values</span><span class="p">,</span> <span class="n">ari_values</span><span class="p">,</span> <span class="n">save_path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Plot and compare modularity and Adjusted Rand Index (ARI) across different community detection methods.</span>

<span class="sd">    This function creates two bar charts to visualize the performance of three community detection methods</span>
<span class="sd">    (**Ricci Flow**, **Louvain**, and **Girvan-Newman**) based on:</span>

<span class="sd">    - **Modularity**: Measures the strength of community structure in the network.</span>
<span class="sd">    - **Adjusted Rand Index (ARI)**: Measures clustering accuracy compared to the ground truth.</span>

<span class="sd">    The function saves the resulting comparison plot to the specified directory.</span>

<span class="sd">    :param modularity_values: Modularity scores for Ricci Flow, Louvain, and Girvan-Newman.</span>
<span class="sd">    :type modularity_values: list[float]</span>
<span class="sd">    :param ari_values: ARI scores for Ricci Flow, Louvain, and Girvan-Newman.</span>
<span class="sd">    :type ari_values: list[float]</span>
<span class="sd">    :param save_path: Directory where the comparison plot will be saved.</span>
<span class="sd">    :type save_path: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Labels and corresponding values</span>
    <span class="n">methods</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Ricci Flow&quot;</span><span class="p">,</span> <span class="s2">&quot;Louvain&quot;</span><span class="p">,</span> <span class="s2">&quot;Girvan-Newman&quot;</span><span class="p">]</span>

    <span class="c1"># X positions for bars</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">methods</span><span class="p">))</span>
    <span class="n">bar_width</span> <span class="o">=</span> <span class="mf">0.4</span>

    <span class="c1"># Create subplots</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>

    <span class="c1"># Modularity histogram</span>
    <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">modularity_values</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">bar_width</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Modularity&quot;</span>
    <span class="p">)</span>
    <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">methods</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
    <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Modularity Comparison&quot;</span><span class="p">)</span>
    <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Modularity&quot;</span><span class="p">)</span>
    <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

    <span class="c1"># ARI histogram</span>
    <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">ari_values</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">bar_width</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;ARI&quot;</span><span class="p">)</span>
    <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">methods</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
    <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;ARI Comparison&quot;</span><span class="p">)</span>
    <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;ARI&quot;</span><span class="p">)</span>
    <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

    <span class="c1"># Adjust layout and show plot</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">set_window_title</span><span class="p">(</span><span class="s2">&quot;Comparison with different methods&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">save_path</span><span class="p">,</span> <span class="s2">&quot;Comparison.png&quot;</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">600</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></div>

</pre></div>

          </div>
          
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2025, Fabbri L..
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.1.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
    </div>

    

    
  </body>
</html>